#!/bin/sh

{{ if eq .chezmoi.os "darwin" }}
# macOS - Install homebrew if it doesn't exist
if ! command -v brew >/dev/null 2>&1; then
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi
brew bundle --file=$HOME/.config/homebrew/Brewfile
{{ else if and (eq .chezmoi.os "linux") (or (eq .chezmoi.arch "amd64") (eq .chezmoi.arch "arm64")) }}
# Linux (supported platforms only) - Install homebrew if it doesn't exist
if ! command -v brew >/dev/null 2>&1; then
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi
brew bundle --file=$HOME/.config/homebrew/Brewfile
{{ end }}
